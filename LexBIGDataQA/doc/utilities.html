<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf8">
  <title>LexBIG Data QA System - Utilities</title>
  <meta name="author" content="Brian Carlsen">
  <meta name="description" content="LexBIG Data QA System Utilities">
</head>
<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"
 alink="#ff0000" link="#3333ff" vlink="#999999">
<center>
<h2>LexBIG Data QA System - Utilities<br>
</h2>
<hr style="width: 100%; height: 2px;">
<div style="text-align: left;"><span style="font-weight: bold;"></span><i>Documentation
relating to shared utilities of the LexBIG Data
QA System.</i>
<br>
<br>
</div>
[ <a href="#overview">overview</a> | <a href="#details">details</a> |
<a href="#ref">references</a> ]
</center>
<i><br>
</i>
<h3><a name="overview"></a>Overview</h3>
The LexBIG Data QA System has a number of shared utilities that can be
leveraged across the life cycle stages of different
terminologies.&nbsp; In particular, when generating counts or
performing rule checks against standard data state formats - like
LexBIG database or LexBIG API - these shared tools should be used.<br>
<br>
<h3><a name="details"></a>Details</h3>
The following utilities are covered here:<br>
<ul style="font-family: monospace;">
  <li><a href="utilities.html#countApi">$QA_HOME/bin/countApi.pl</a></li>
  <li><a href="#countDb">$QA_HOME/bin/countDb.pl</a></li>
  <li><a href="utilities.html#countObo">$QA_HOME/bin/countObo.pl</a></li>
  <li><a href="#countOboOwl">$QA_HOME/bin/countOboOwl.pl</a></li>
  <li><a href="#diffReport">$QA_HOME/bin/diffReport.pl</a></li>
  <li><a href="utilities.html#rulesApi">$QA_HOME/bin/rulesApi.</a><a
 href="utilities.html#rulesApi">pl</a></li>
  <li><a href="#rulesDb">$QA_HOME/bin/rulesDb.pl</a></li>
  <li><a href="#rulesObo">$QA_HOME/bin/rulesObo.</a><a href="#rulesApi">pl</a></li>
</ul>
<br>
<br>
<span style="font-weight: bold;"><a name="countApi"></a><span
 style="font-family: monospace;">$QA_HOME/bin/countApi.pl</span><br>
</span>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><span
 style="font-weight: bold;">Input</span></span>: n/a<span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Output</span></span>: formatted QA counts
file written to STDOUT<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;">Approximate Run Time</span><span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span>:
&lt; 30 second<span style="font-weight: bold;"></span>s<br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Assumptions</span></span>:<br>
</div>
<ul style="margin-left: 80px;">
  <li><span style="font-family: monospace;">$LEXBIG_HOME</span> is set
properly<br>
  </li>
  <li>Terminology to count is loaded into LexBIG installlation<br>
  </li>
</ul>
<div style="margin-left: 40px;"><span style="font-weight: bold;"></span><span
 style="font-weight: bold;">Sample Call</span>:<br>
</div>
<pre style="margin-left: 40px;">% cd $QA_HOME<br>% bin/countApi.pl<br>-----|------------------------------|-------------------------|---------------<br>#    |Local Name                    |Version                  |Tag<br>-----|------------------------------|-------------------------|---------------<br>1    |gene_ontology                 |UNASSIGNED               |<br>-----|------------------------------|-------------------------|---------------<br>2    |oboInOwl                      |June2008                 |<br>-----|------------------------------|-------------------------|---------------<br>3    |LOINC                         |222                      |<br>-----|------------------------------|-------------------------|---------------<br><br><br>NOTE: &gt;&gt; indicates column value exceeds the available width.<br>Enter the number of the Coding scheme to use, then &lt;Enter&gt; :<br><span
 style="font-weight: bold;">2</span><br>... results shown in terminal ...<br></pre>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Notes<span
 style="font-weight: bold;"></span></span>: <span
 style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span>This script is
interactive.&nbsp; It leverages the LexBIG API to let the user choose
which terminology to run against.&nbsp; Counts are then generated and
written to STDOUT.&nbsp; This must be cut from the terminal screen and
pasted into the appropriate file (e.g. countsC.txt).<br>
<br>
</div>
<span style="font-weight: bold;"><a name="countDb"></a><span
 style="font-family: monospace;">$QA_HOME/bin/countDb.pl</span><br>
<br>
</span>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><span
 style="font-weight: bold;">Input (optional)</span></span>: [-d database] [-h source-specific extension]<span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Output</span></span>: formatted QA counts
file written to STDOUT<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;">Approximate Run Time</span><span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span>:
Depends on source<br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Assumptions</span></span>:<br>
</div>
<ul style="margin-left: 80px;">
  <li>Terminology to count is loaded into LexBIG database<br>
  </li>
  <li><span style="font-family: monospace;">$QA_HOME/etc/db.prop</span>
settings are configured properly.<br>
  </li>
  <li>(required for ChangeCount/history) <span style="font-family: monospace;">$QA_HOME/etc/dbCountQueries[source].dat</span> is present and configured properly.</li>
</ul>
<div style="margin-left: 40px;"><span style="font-weight: bold;"></span><span
 style="font-weight: bold;">Sample Call</span>:<br>
</div>
<pre style="margin-left: 40px;">% cd $QA_HOME<br>% bin/countDb.pl &gt;&amp;! data/NCI/201105/countsB.txt<br>% bin/countDb.pl -d lb6_fb -h NCI &gt;&gt;&amp;! data/NCI/201105/countsB.txt</pre>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Notes<span
 style="font-weight: bold;"></span></span>: <span
 style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span>This script makes use of the <span
 style="font-family: monospace;">$QA_HOME/etc/db.prop</span> file to
configure itself.&nbsp; It connects to the relevant LexBIG database and
performs a series of counts defined in <span
 style="font-family: monospace;">$QA_HOME/etc/dbCountQueries.dat</span>.
 <br><br>Obtaining ChangeCount (history) data must be done in a separate step because history data is stored in a separate database (or database table) than content, requiring the "-d" parameter override.  In addition,
 the data model and hence queries are different, requiring the "-h" parameter override.<br>
</div>
<br>
<br>
<span style="font-weight: bold;"><a style="font-family: monospace;"
 name="countObo"></a><span style="font-family: monospace;">$QA_HOME/bin/countObo.pl</span><br>
<br>
</span>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><span
 style="font-weight: bold;">Input</span></span>:
&lt;OBO input file&gt;<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Output</span></span>: formatted QA counts
file written to STDOUT<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;">Approximate Run Time</span><span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span>:
&lt; 5 second<span style="font-weight: bold;"></span>s<br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Assumptions</span></span>:<br>
</div>
<ul style="margin-left: 80px;">
  <li>OBO input file exists<br>
  </li>
  <li>Input file is in OBO v1.2 format<br>
  </li>
</ul>
<div style="margin-left: 40px;"><span style="font-weight: bold;"></span><span
 style="font-weight: bold;">Sample Call</span>:<br>
</div>
<pre style="margin-left: 40px;">% cd $QA_HOME<br>% bin/countObo.pl data/GO20080901/gene_ontology_edit.obo &gt;&amp;! data/GO20080901/countsA.txt<br></pre>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Notes<span
 style="font-weight: bold;"></span></span>: <span
 style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span>This script takes an OBO input
file and generates a series of comparable QA counts.&nbsp; In some
instances it counts data that is for informational purposes only and is
not compared.<br>
</div>
<br>
<a style="font-weight: bold;" name="countOboOwl"></a><span
 style="font-weight: bold; font-family: monospace;">$QA_HOME/bin/countOboOwl.pl</span><br>
<br>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><span
 style="font-weight: bold;">Input</span></span>:
&lt;OBO Owl input file&gt; &lt;source&gt;<span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Output</span></span>: formatted QA counts
file written to STDOUT<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;">Approximate Run Time</span><span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span>:
&lt; 2 min<br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Assumptions</span></span>:<br>
</div>
<ul style="margin-left: 80px;">
  <li>OBO Owl input file exists<br>
  </li>
  <li>Input file is in format created by NCI OBO to Owl conversion
tools.<br>
  </li>
</ul>
<div style="margin-left: 40px;"><span style="font-weight: bold;"></span><span
 style="font-weight: bold;">Sample Call</span>:<br>
</div>
<pre style="margin-left: 40px;">% cd $QA_HOME<br>% bin/countOboOwl.pl data/GO20080901/gene_ontology.owl gene_onotology &gt;&amp;! data/GO20080901/countsA.txt<br></pre>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Notes<span
 style="font-weight: bold;"></span></span>: <span
 style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span>This script takes an OBO in Owl
input
file and generates a series of comparable QA counts.&nbsp; In some
instances it counts data that is for informational purposes only and is
not compared.&nbsp; This is specifically designed to work on files
converted from OBO to Owl using NCI tools.&nbsp; The source information
is not available in the file, thus it is passed in.<br>
</div>
<br>
<span style="font-weight: bold;"><a name="diffReport"></a><span
 style="font-family: monospace;">$QA_HOME/bin/diffReport.pl</span><br>
<br>
</span>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><span
 style="font-weight: bold;"><span style="font-weight: bold;">Input</span></span>: [-t &lt;content|anonymous|metadata&gt;]
&lt;qa file 1&gt; &lt;qa file 2&gt;<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Output</span></span>: text based report
written to STDOUT<span style="font-weight: bold;"><span
 style="font-weight: bold;"></span></span><br>
<span style="font-weight: bold;">Approximate Run Time</span><span
 style="font-weight: bold;"><span style="font-weight: bold;"></span></span>:
&lt; 1 second<span style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span><span style="font-weight: bold;"><span
 style="font-weight: bold;">Assumptions</span></span>:<br>
</div>
<ul style="margin-left: 40px;">
  <li>qa file 1 exists</li>
  <li>qa file 2 exists<br>
  </li>
</ul>
<div style="margin-left: 40px;"><span style="font-weight: bold;"></span><span
 style="font-weight: bold;">Sample Call</span>:<br>
</div>
<pre style="margin-left: 40px;">% cd $QA_HOME<br>% bin/diffReport.pl data/GO20080901/countsA.txt data/GO20080901/countsB.txt &gt;&amp;! data/GO20080901/diffAB.txt<br></pre>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Notes<span
 style="font-weight: bold;"></span></span>: <span
 style="font-weight: bold;"></span><br>
<span style="font-weight: bold;"></span>This script takes two properly
formatted QA counts files and compares them.&nbsp; It produces a
textual report as output in three sections:<br>
</div>
<ol style="margin-left: 40px;">
  <li>Cases where test name and field values match between the two
files (including discrepancies and exact counts).</li>
  <li>Cases where test name and field values appear in the first QA
file but not the second.</li>
  <li>Cases where test name and field values appear in the second QA
file but not the first.</li>
</ol>
<div style="margin-left: 40px;">In all cases, adjustments are accounted
for and explicitly indicated with ** in the output.  The script takes an optional -t parameter that allows you to see only the report of entries by a particular qaModelType, one of &quot;content&quot;, &quot;anonymous&quot; or &quot;metadata&quot;.s<br>
</div>
<br>
<span style="font-weight: bold;"><a name="rulesDb"></a><span
 style="font-family: monospace;">$QA_HOME/bin/rulesDb.pl</span><br>
<br>
TODO:</span> describe this tool<br>
<br>
<span style="font-weight: bold;"><a name="rulesApi"></a><span
 style="font-family: monospace;">$QA_HOME/bin/rulesApi.pl</span><br>
<br>
TODO:</span> describe this tool<br>
<br>
<h3><a name="ref"></a>References</h3>
<ul>
  <li>LexEVS GForge Project: <a
 href="http://gforge.nci.nih.gov/projects/lexevs/">http://gforge.nci.nih.gov/projects/lexevs/</a><br>
  </li>
  <li>EVS Operations GForge Project: <a
 href="http://gforge.nci.nih.gov/projects/evsops/">http://gforge.nci.nih.gov/projects/evsops/</a></li>
</ul>
<center><br>
[ <a href="#overview">overview</a> | <a href="#details">details</a> |
<a href="#ref">references</a> ]<br>
&nbsp;
<font size="-1"><span style="font-weight: bold;"><br>
</span></font></center>
<p>
</p>
<hr width="100%">
<table nosave="" border="0" cols="2" width="100%">
  <tbody>
    <tr nosave="">
      <td nosave="" align="left" valign="top">
      <address><span style="text-decoration: underline;"><a
 href="index.html">Index</a><br>
      </span></address>
      </td>
      <td nosave="" align="right" valign="top">
      <address><font size="-1">Contact: <a
 href="mailto:bcarlsen@apelon.com">Brian A. Carlsen</a></font></address>
      <address> <font size="-1">Created: 09/09/2008</font></address>
      <address> <font size="-1">Last Updated: </font><font size="-1">09/18/2008</font></address>
      </td>
    </tr>
  </tbody>
</table>
</body>
</html>
